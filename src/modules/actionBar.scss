@import '../shared/styles/colors', '../shared/styles/fonts', '../shared/styles/fontSizeCalculator', '../shared/styles/variables';

// ######## //
// TODO: Remove !important when we refactor <List /> naming convention to BEM.
//       Remove .ui when we refactor <Drawer />, <Grid />, and <List /> naming convention to BEM
//       Rename file or move to a better position.
// ######## //

// Forwards
// Step 1
$fade-out-opacity-duration: 200ms;
// Step 2
$highlight-option-delay: 250ms;
$highlight-option-duration: 300ms;
// Step 3
$move-option-up-delay: $fade-out-opacity-duration + $highlight-option-delay + $highlight-option-duration;
$move-option-up-duration: $highlight-option-duration;
// Step 4
$move-sub-option-down-delay: $move-option-up-delay + $move-option-up-duration;
$move-sub-option-down-duration: $highlight-option-duration;
$fade-in-sub-option-delay: $move-sub-option-down-delay;
$fade-in-sub-option-duration: $highlight-option-duration;
// Backwards
// Step 1
// move sub options up and fade out
$move-sub-option-up-duration: $highlight-option-duration;
$fade-in-sub-option-duration: $highlight-option-duration;
// move selected option back down
$move-option-down-duration: $highlight-option-duration;
// Step 2
// remove highlight on selected option
$remove-highlight-option-delay: $move-option-down-duration + 50ms;
$remove-highlight-option-duration: $highlight-option-duration;
// Step 3
// fade in drawer title
$fade-in-options-delay: $remove-highlight-option-delay + $remove-highlight-option-duration;
$fade-in-options-duration: $fade-out-opacity-duration;
// stagger options down and fade in
$move-options-down-delay: $fade-in-options-delay;
$move-options-down-duration: $highlight-option-duration;

.ui {
    &.drawer.has-drawer-- { // sass-lint:disable-line class-name-format
        &action_bar { // sass-lint:disable-line class-name-format
            .drawer-container-inner {
                padding-top: $drawer-action-bar-height;
                .action_bar-drawer {
                    top: 0;
                }
            }
            &.has-drawer--title_bar { // sass-lint:disable-line class-name-format
                .drawer-container-inner {
                    padding-top: $drawer-title-bar-height + $drawer-action-bar-height;
                    .action_bar-drawer {
                        top: $drawer-title-bar-height;
                    }
                }
                &:not(.has-drawer--navigation) .drawer-container-inner {
                    .action_bar-drawer {
                        background-color: color(backgroundColorLight);
                        border-top: 1px solid color(borderColor);
                    }
                }
                &.has-drawer--navigation .drawer-container-inner { // sass-lint:disable-line class-name-format
                    padding-top: $drawer-title-bar-height + $drawer-navigation-height + $drawer-action-bar-height;
                    .action_bar-drawer {
                        top: $drawer-title-bar-height + $drawer-navigation-height;
                    }
                }
            }
        }
    }
    &.action_bar {
        align-items: center;
        border-bottom: 1px solid color(borderColor);
        display: flex;
        justify-content: flex-start;
        left: 0;
        position: fixed;
        right: 0;
    }
    .action_bar-page {
        background-color: color(backgroundColorLight);
        border-top: 1px solid color(borderColor);
        min-height: 50px;
        padding: 8px 11px;
        top: 55px;
        width: auto;
        z-index: 3;
    }
    .action_bar-drawer {
        background-color: color(backgroundColor);
        height: $drawer-action-bar-height;
        padding: 0 11px;
        z-index: $drawer-zindex;
    }
    &.action_bar--grid {
        flex-wrap: nowrap;
        margin: 0;
        width: 100%;
    }
    .action_bar--grid_column {
        padding-bottom: 0;
        padding-top: 0;
        &:first-child {
            padding-left: 0;
        }
        &:last-child {
            padding-right: 0;
        }
    }
    &.action_bar--list {
        align-items: center;
        display: flex;
        justify-content: center;
    }
    .action_bar--list_item {
        align-items: center;
        align-self: stretch;
        display: inline-flex;
        justify-content: center;
        margin-left: 0 !important; // sass-lint:disable-line no-important
        padding: 0 rem(11px) !important; // sass-lint:disable-line no-important
        &::before { height: 88% !important; } // sass-lint:disable-line no-important
        &:first-child {
            padding-left: 0 !important; // sass-lint:disable-line no-important
        }
        &:last-child {
            padding-right: 0 !important; // sass-lint:disable-line no-important
        }
    }
    .action_bar--actions_button_drawer_content {
        padding: 22px 11px;
    }
    .action_bar--actions_button_drawer_title {
        opacity: 1;
        transition: opacity $fade-in-options-duration ease-in-out $fade-in-options-delay;
        &-hide {
            transition: opacity $fade-out-opacity-duration ease-in-out;
            opacity: 0;
        }
    }
    .action_bar--actions_button_drawer_option {
        font-size: rem(14px);
        font-weight: $default-font-weight-semibold;
        margin: 0 -11px;
        &-hide {
            opacity: 0;
            transition: opacity $fade-out-opacity-duration ease-in-out;
        }
        &-selected {
            transform: translateY(-61px);
            transition: transform $move-option-up-duration ease-in-out $move-option-up-delay;
        }
        &:first-child {
            border-top: 1px solid color(borderColor);
        }
        &-selected:first-child {
            border-top: 0;
        }
    }
    .actions_button_drawer_option--parent, .actions_button_drawer_sub_option {
        align-items: center;
        border-bottom: 1px solid color(borderColor);
        cursor: pointer;
        display: flex;
        min-height: 55px;
        opacity: 1;
        padding: 11px;
        position: relative;
    }
    .actions_button_drawer_option {
        &--parent {
            transition: background-color 150ms ease-in, color 150ms ease-in, opacity $fade-out-opacity-duration ease-in-out;
            z-index: 1;
            &-disabled {
                cursor: default;
            }
            &::before {
                background-color: color(backgroundColorHighlight);
                content: '';
                height: 54px;
                left: 0;
                opacity: 0;
                position: absolute;
                top: 0;
                transition: width $highlight-option-duration ease-in-out $highlight-option-delay;
                width: 0;
                z-index: 0;
            }
            &-selected {
                border-bottom: 0;
                color: color(colorInverse);
                &::before {
                    opacity: 1;
                    width: 100%;
                }
            }
        }
        &--sub_options {
            height: auto;
            opacity: 1;
            &-hide {
                height: 0;
                opacity: 0;
                pointer-events: none;
            }
        }
    }
    .actions_button_drawer {
        &_option_parent, &_sub_option {
            &--icon_container, &--label {
                z-index: 1;
            }
            &--icon_container {
                align-items: center;
                display: inline-flex;
                height: 32px;
                justify-content: center;
                margin-right: 16px;
                transition: background-color 200ms ease-in;
                width: 32px;
                z-index: 1;
            }
        }
        &_option_parent {
            &--icon_container {
                background-color: color(backgroundColorInverse);
                border-radius: 50%;
            }
        }
        &_sub_option {
            opacity: 0;
            transform: translateY(-55px);
            @for $i from 1 through 11 {
                &-#{$i} {
                    transition:
                        opacity $fade-in-sub-option-duration ease-in-out $fade-in-sub-option-delay + $i * 50ms,
                        transform $move-sub-option-down-duration ease-in-out $move-sub-option-down-delay + $i * 50ms;
                }
            }
            &-show {
                opacity: 1;
                transform: translateY(0);
            }
        }
    }
    .action_bar--search-mobile {
        height: 0;
        opacity: 0;
        overflow: hidden;
        padding-top: 0;
        transition: height 333ms ease-in-out, opacity 333ms ease-in-out, padding-top 333ms ease-in-out;
        &-show {
            height: 55px;
            opacity: 1;
            padding-top: 11px;
        }
    }
}

@media only screen and (max-width: 767px) {
    .ui {
        &.action_bar {
            .button {
                height: 32px;
                min-height: 32px;
                &-icon {
                    width: 32px;
                    .button-inner-container {
                        width: 32px;
                    }
                }
                .button-inner-container {
                    height: 32px;
                }
            }
        }
    }
}

@media only screen and (min-width: 768px) {
    .ui {
        &.action_bar {
            padding: 0 22px;
            &-page {
                left: 250px;
                min-height: 70px;
                padding: 0 22px;
                top: 70px;
            }
            &-drawer {
                padding: 0 22px;
            }
        }
    }
}
